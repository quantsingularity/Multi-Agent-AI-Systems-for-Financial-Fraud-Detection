# Default values for fraud-detection Helm chart

# Global settings
global:
  environment: production
  namespace: fraud-detection

# Fraud Detection API
api:
  replicaCount: 3
  image:
    repository: your-registry/fraud-detection
    tag: "1.0.0"
    pullPolicy: Always

  resources:
    requests:
      cpu: 500m
      memory: 1Gi
    limits:
      cpu: 2000m
      memory: 4Gi

  autoscaling:
    enabled: true
    minReplicas: 3
    maxReplicas: 20
    targetCPUUtilizationPercentage: 70
    targetMemoryUtilizationPercentage: 80

  service:
    type: ClusterIP
    port: 80
    targetPort: 8000

  ingress:
    enabled: true
    className: nginx
    annotations:
      cert-manager.io/cluster-issuer: letsencrypt-prod
      nginx.ingress.kubernetes.io/rate-limit: "1000"
      nginx.ingress.kubernetes.io/ssl-redirect: "true"
    hosts:
      - host: fraud-api.your-domain.com
        paths:
          - path: /
            pathType: Prefix
    tls:
      - secretName: fraud-detection-tls
        hosts:
          - fraud-api.your-domain.com

  env:
    - name: MODEL_VERSION
      value: "1.0.0"
    - name: ENVIRONMENT
      value: "production"
    - name: LOG_LEVEL
      value: "INFO"
    - name: FRAUD_THRESHOLD
      value: "0.5"
    - name: BATCH_SIZE
      value: "100"
    - name: MAX_WORKERS
      value: "4"

# Model Configuration
model:
  version: "1.0.0"
  storage:
    enabled: true
    size: 10Gi
    storageClass: standard
    accessMode: ReadWriteMany

# Redis (caching and queues)
redis:
  enabled: true
  architecture: standalone
  auth:
    enabled: true
    password: "CHANGE_ME"
  master:
    resources:
      requests:
        cpu: 100m
        memory: 256Mi
      limits:
        cpu: 500m
        memory: 1Gi

# PostgreSQL (results and audit logs)
postgresql:
  enabled: true
  auth:
    username: fraud_detection_user
    password: "CHANGE_ME"
    database: fraud_detection
  primary:
    resources:
      requests:
        cpu: 250m
        memory: 512Mi
      limits:
        cpu: 1000m
        memory: 2Gi
    persistence:
      enabled: true
      size: 20Gi

# Monitoring
monitoring:
  enabled: true
  prometheus:
    enabled: true
    serviceMonitor:
      enabled: true
      interval: 30s
  grafana:
    enabled: true
    dashboards:
      enabled: true

# Security
security:
  podSecurityPolicy:
    enabled: false
  networkPolicy:
    enabled: true
  secrets:
    # LLM API Keys (optional)
    openaiApiKey: ""
    anthropicApiKey: ""
    # Cloud credentials
    awsAccessKeyId: ""
    awsSecretAccessKey: ""
    # Alerting
    slackWebhookUrl: ""
    pagerdutyApiKey: ""

# Business Configuration
business:
  costAnalysis:
    falsePositiveCost: 50
    falseNegativeCost: 500
    avgTransactionValue: 150
    monthlyTransactions: 1000000

  rateLimit:
    maxFlagsPerUserPerDay: 10

  abTesting:
    enabled: true
    modelBTrafficPercent: 20

# Scaling Guidelines for Production
scaling:
  # For 1M transactions/day (~12 TPS average, ~100 TPS peak)
  small:
    replicas: 3
    cpu: "500m"
    memory: "1Gi"

  # For 10M transactions/day (~120 TPS average, ~1K TPS peak)
  medium:
    replicas: 10
    cpu: "1000m"
    memory: "2Gi"

  # For 100M transactions/day (~1.2K TPS average, ~10K TPS peak)
  large:
    replicas: 30
    cpu: "2000m"
    memory: "4Gi"

# Deployment Strategy
deployment:
  strategy:
    type: RollingUpdate
    rollingUpdate:
      maxSurge: 1
      maxUnavailable: 0

# Pod Disruption Budget
podDisruptionBudget:
  enabled: true
  minAvailable: 2

# Service Account
serviceAccount:
  create: true
  name: fraud-detection-sa
  annotations: {}
